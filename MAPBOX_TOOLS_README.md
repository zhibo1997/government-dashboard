# Mapbox 地图工具功能说明

## 概述
本项目为Mapbox地图添加了三个核心工具功能：复位、指北针、测距。所有工具都遵循Ant Design设计规范，使用语义化色彩。

## 工具功能

### 1. 地图复位工具
- **功能**：将地图恢复到初始状态
- **操作**：点击复位按钮
- **效果**：
  - 中心点回到阳新县坐标 `[115.133954, 29.823198]`
  - 缩放级别恢复到 10
  - 旋转角度重置为 0°
  - 倾斜角度重置为 0°
  - 动画时长 2 秒

### 2. 指北针控件
- **功能**：显示地图方向指示器
- **位置**：地图右上角
- **特性**：
  - 只显示指北针，不显示缩放控件
  - 支持地图旋转时自动更新方向
  - 点击可快速重置地图方向

### 3. 测距工具
- **功能**：测量地图上两点间的距离
- **操作流程**：
  1. 点击测距按钮启用测距模式
  2. 在地图上点击第一个点
  3. 点击第二个点完成测量
  4. 双击任意位置结束测距
- **显示内容**：
  - 连接线（蓝色虚线）
  - 测量点标记（蓝色圆点）
  - 距离标签（显示公里数）
- **自动结束**：测量完成后自动退出测距模式

## 技术实现

### 工具类方法
```typescript
// 地图复位
mapboxUtils.resetMap(map: mapboxgl.Map): void

// 添加指北针
mapboxUtils.addCompassControl(map: mapboxgl.Map, position: string): void

// 启用测距模式
mapboxUtils.enableDistanceMode(map: mapboxgl.Map): void

// 禁用测距模式
mapboxUtils.disableDistanceMode(map: mapboxgl.Map): void
```

### 色彩规范
- **主色**：#1677ff（拂晓蓝）
- **线条**：蓝色虚线
- **点标记**：蓝色圆点，白色边框
- **标签**：蓝色文字，白色光晕

### 事件处理
- 测距工具使用点击和双击事件
- 自动管理事件监听器的绑定和解绑
- 支持多次测距操作

## 使用方法

### 在组件中使用
```vue
<template>
  <MapboxMapTools />
</template>

<script setup>
import MapboxMapTools from './MapboxMapTools.vue';
</script>
```

### 在地图初始化后添加控件
```typescript
// 地图加载完成后添加指北针
map.on('load', () => {
  mapboxUtils.addCompassControl(map, 'top-right');
});
```

## 注意事项

1. **地图实例**：所有工具都需要有效的地图实例
2. **事件冲突**：测距模式会临时接管地图的点击事件
3. **图层管理**：测距工具会自动创建和管理相关图层
4. **性能优化**：工具使用后会自动清理资源

## 扩展功能

未来可以基于现有架构添加：
- 面积测量工具
- 路径规划工具
- 标注工具
- 图层管理工具
